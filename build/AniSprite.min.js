/*
* AniSprite v.0.1.10
* Wes Jones. MIT 2014
*/
!function(a,b){function c(a,b){function c(){var c,d,p,q,r;if(k.dependencies){for(q=0,p=[];q<k.dependencies.length;)r="function"==typeof k.dependencies[q]?k.dependencies[q]():k.dependencies[q],r&&(p=p.concat.apply(p,i[k.dependencies[q]].frames)),q+=1;p=p.concat.apply(p,k.frames)}else c=k,p=c.frames;p[l]||(n>0?n-=1:k=j,l=0,m=0,c=k,p=c.frames),d=p[l],0===l&&c.start&&c.start(),g+=o,e||(e=document.getElementsByClassName(a)[0],e.classList.add(b.name),e.style.position="absolute"),e&&(e.style.webkitTransform=h?"scaleX(-1)":"",e.style.backgroundPosition=d.x+"px "+d.y+"px",e.style.width=d.width+"px",e.style.height=d.height+2+"px",e.style.top=f+(d.oy||0)-d.height+"px",e.style.left=g+(d.ox||0)+"px"),d.wait&&m<d.wait?m+=1:(l+=1,m=0),l===p.length&&c.end&&c.end()}var e,f=200,g=100,h=!1,i=b.frames,j=i.stance,k=j,l=0,m=0,n=0,o=0;this.__defineGetter__("name",function(){return a}),this.__defineGetter__("frames",function(){return i}),this.__defineSetter__("frames",function(a){i=a}),this.__defineGetter__("y",function(){return f}),this.__defineSetter__("y",function(a){f=isNaN(a)?0:a}),this.__defineGetter__("x",function(){return g}),this.__defineSetter__("x",function(a){g=isNaN(a)?0:a}),this.__defineGetter__("reverse",function(){return h}),this.__defineSetter__("reverse",function(a){h=!!a}),this.__defineGetter__("speed",function(){return o}),this.__defineSetter__("speed",function(a){o=a}),this.__defineGetter__("defaultAni",function(){return j}),this.__defineSetter__("defaultAni",function(a){j=a}),this.play=function(a){return k&&k.end&&k.end(),i[a]===k?void(n=1):(k=i[a]||i.stance,l=0,void(m=0))},this.restoreDefault=function(){j=i.stance},d.on(d.events.UPDATE,c)}b.ani=a,function(a,b){b.belt=a;var c={};c.dispatcher=function(a,b,c){function d(a,b){var c,d;d=j[a],d&&(b?(c=d.indexOf(b),-1!==c&&d.splice(c,1)):d.length=0)}function e(a,b){return j[a]=j[a]||[],j[a].push(b),function(){d(a,b)}}function f(c,f){function g(){d(c,g),f.apply(b||a,arguments)}return e(c,g)}function g(a){return j[a]}function h(b,c){return b&&b.apply(a,c)}function i(a){if(j[a])for(var b=0,c=j[a],d=c.length;d>b;)h(c[b],arguments),b+=1}var j={};b&&c?(a.on=b[c.on]&&b[c.on].bind(b),a.off=b[c.off]&&b[c.off].bind(b),a.once=b[c.once]&&b[c.once].bind(b),a.dispatch=b[c.dispatch].bind(b)):(a.on=e,a.off=d,a.once=f,a.dispatch=i),a.getListeners=g},a.async=c}({},function(){return this}());var d=function(){function a(){c.dispatch(c.events.UPDATE)}var b,c={};return c.events={UPDATE:"aniSpriteEngine:update"},c.start=function(c){c=c||60,b=setInterval(a,1e3/c)},c.stop=function(){clearInterval(b)},belt.async.dispatcher(c),c}();a.engine=d,a.AniSprite=c}({},function(){return this}());